@model PathProcedurePageIndexModel

@inject MedicDataLocalization medicDataLocalization

@{
    ViewData["Title"] = Model.Title;

    Dictionary<string, string> paramsByName = Model.Search != default ?
        Model.Search.BuildQuery(default) : new Dictionary<string, string>();

    ViewData[Constants.Sexes] = Model.Sexes;
    ViewData[Constants.HealthRegions] = Model.HealthRegions;
    ViewData[Constants.ClinicUsedDrugs] = Model.UsedDrugCodes;
}

<article>
    <header>
        <h2 class="text-center">@medicDataLocalization.Get("PathProceduresView"): @Model.TotalResults @medicDataLocalization.Get("Results")</h2>
        <h4 class="text-center text-info">@Model.Keywords</h4>
    </header>
    <section>
        <partial name="~/Views/Shared/Partials/PathProcedures/PathProcedureSearch.cshtml" model="@Model.Search" view-data="@ViewData" />
    </section>
    <section class="mt-sm-1 clearfix">
        <partial name="~/Views/Shared/Partials/PathProcedures/PathProcedureOrder.cshtml" model="@Model.Search" />
    </section>
    <section class="mt-sm-1">
        @if (Model.PathProcedures != default && Model.PathProcedures.Count > 0)
        {
            <div>
                <div class="row">
                    <div class="col-sm-1 font-weight-bold">@medicDataLocalization.Get("DateSend")</div>
                    <div class="col-sm-2 font-weight-bold">@medicDataLocalization.Get("FirstMainDiagCode")</div>
                    <div class="col-sm-2 font-weight-bold">@medicDataLocalization.Get("FirstMainDiagName")</div>
                    <div class="col-sm-2 font-weight-bold">@medicDataLocalization.Get("SecondMainDiagCode")</div>
                    <div class="col-sm-2 font-weight-bold">@medicDataLocalization.Get("SecondMainDiagName")</div>
                    <div class="col-sm-1 font-weight-bold">@medicDataLocalization.Get("UsedDrugCode")</div>
                    <div class="col-sm-1 font-weight-bold">@medicDataLocalization.Get("ViewPatient")</div>
                    <div class="col-sm-1 font-weight-bold">@medicDataLocalization.Get("ViewPathProcedure")</div>
                </div>
                @foreach (PathProcedurePreviewViewModel currentPathProcedure in Model.PathProcedures)
                {
                    <hr />
                    <div class="row">
                        <div class="col-sm-1">@currentPathProcedure.DateSend.ToShortDateString()</div>
                        <div class="col-sm-2">@currentPathProcedure.FirstMainDiagCode</div>
                        <div class="col-sm-2">@currentPathProcedure.FirstMainDiagName</div>
                        <div class="col-sm-2">@currentPathProcedure.SecondMainDiagCode</div>
                        <div class="col-sm-2">@currentPathProcedure.SecondMainDiagName</div>
                        <div class="col-sm-1">@currentPathProcedure.UsedDrugCode</div>
                        <div class="col-sm-1">
                            <a asp-controller="@MedicBaseController.GetName(nameof(PatientController))"
                               asp-action="@nameof(PatientController.Patient)"
                               asp-route-id="@currentPathProcedure.PatientId" class="btn btn-info">@medicDataLocalization.Get("View")</a>
                        </div>
                        <div class="col-sm-1">
                            <a asp-controller="@MedicBaseController.GetName(nameof(PathProcedureController))"
                               asp-action="@nameof(PathProcedureController.PathProcedure)"
                               asp-route-id="@currentPathProcedure.Id"
                               class="btn btn-default">@medicDataLocalization.Get("View")</a>
                        </div>
                    </div>
                }
            </div>
            <footer>
                <pager page-count="@Model.TotalPages"
                       current-page="@Model.CurrentPage"
                       controller-name="@MedicBaseController.GetName(nameof(PathProcedureController))"
                       action-name="@nameof(PathProcedureController.Index)"
                       additional-properties="@paramsByName"
                       nav-class-names="btn-toolbar"
                       ul-class-names="pagination"
                       li-class-names="page-item"
                       li-selected-class-names="page-item active"
                       anchor-class-names="page-link">

                </pager>
            </footer>
        }
        else
        {
            <div class="text-center text-info font-weight-bold">@medicDataLocalization.Get("NoResults")</div>
        }
    </section>
</article>